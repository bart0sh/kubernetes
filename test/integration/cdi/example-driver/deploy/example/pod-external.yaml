# Two pods, one shared, global claim
apiVersion: v1
kind: ConfigMap
metadata:
  name: external-claim-parameters
  namespace: default
data:
  a: b
---
apiVersion: v1
kind: ResourceClaim
metadata:
  name: external-claim
spec:
  resourceClassName: example
  parameters:
    apiVersion: v1
    kind: ConfigMap
    name: external-claim-parameters
---
apiVersion: v1
kind: Pod
metadata:
  name: test-external-claim
spec:
  restartPolicy: Never
  containers:
  - name: with-resource
    image: ubuntu:22.04
    command: ["sh", "-c", "ls -la /dev/tty8 ; set |grep envVar2"]
    resources:
      claims:
      - resource
  - name: without-resource
    image: ubuntu:22.04
    command: ["sh", "-c", "ls -la /dev/tty* ; set"]
  resourceClaims:
  - name: resource
    claim:
      resourceClaimName: external-claim
